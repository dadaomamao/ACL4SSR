###############################################################################
# å®Œæ•´è‡ªåŒ…å« Clash.Meta YAML é…ç½®
# - è§„åˆ™é›†ï¼ˆrule-providersï¼‰å®Œå…¨æŒ‰æ—§ INI åˆ—è¡¨å†™å…¥ï¼ˆå«æ³¨é‡Šæ‰çš„è§„åˆ™ï¼‰
# - æ–°å¢ ğŸŒ å…¨å±€æ™ºèƒ½ + ğŸ‡­ğŸ‡°/ğŸ‡¯ğŸ‡µ/ğŸ‡ºğŸ‡¸ åŒºåŸŸæ™ºèƒ½ç»„
# - å…¶ä»–ç­–ç•¥ç»„ä¸è§„åˆ™åŒæ—§ç‰ˆå«ä¹‰ï¼Œç¡®ä¿å³æ‹·å³ç”¨
###############################################################################

########################################
# åŸºç¡€è®¾ç½®
########################################
mixed-port: 7890
allow-lan: true
bind-address: "0.0.0.0"
mode: rule
log-level: info
external-controller: 0.0.0.0:9090
secret: "è¯·æ”¹æˆè‡ªå·±çš„ç®¡ç†å¯†é’¥"

########################################
# DNS
########################################
dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: false
  enhanced-mode: fake-ip
  default-nameserver: [223.5.5.5, 119.29.29.29, 8.8.8.8]
  fake-ip-filter: ["*.lan","*.localdomain","*.example"]

########################################
# èŠ‚ç‚¹ä¸è®¢é˜…ï¼ˆå ä½ï¼ŒOpenClash ä¼šè‡ªåŠ¨å¡«å……ï¼‰
########################################
proxies: []
proxy-providers: {}

########################################
# è§„åˆ™é›†æä¾›å™¨ï¼ˆæŒ‰æ—§æ–‡ä»¶é¡ºåºï¼‰
########################################
rule-providers:
  ğŸ‡¯ğŸ‡µ_æ—¥æœ¬å®¶å®½:                 # ; å·²æ³¨é‡Šï¼Œè‹¥éœ€å¯ç”¨è¯·å»æ‰ '#' å¹¶åœ¨ rules ä¸­å¼•ç”¨
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/dadaomamao/ACL4SSR/refs/heads/main/crypto.list
    path: ./ruleset/jp-home.list
    ;interval: 86400
    enabled: false              # â† ä¿æŒç¦ç”¨

  ğŸ¯_å…¨çƒç›´è¿_main:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/dadaomamao/ACL4SSR/refs/heads/main/Direct.list
    path: ./ruleset/direct-main.list
    ;interval: 86400

  ğŸš€_èŠ‚ç‚¹é€‰æ‹©_proxy-lite:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/dadaomamao/ACL4SSR/refs/heads/main/ProxyLite.list
    path: ./ruleset/proxy-lite.list
    ;interval: 86400

  ğŸ¤–_AI:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/dadaomamao/ACL4SSR/refs/heads/main/AI.list
    path: ./ruleset/ai.list
    ;interval: 86400

  ğŸ¯_LAN:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list
    path: ./ruleset/lan.list
    ;interval: 86400

  ğŸ¯_UnBan:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/UnBan.list
    path: ./ruleset/unban.list
    ;interval: 86400

  # ğŸ›‘ å¹¿å‘Šæ‹¦æˆªï¼ˆå·²æ³¨é‡Šï¼‰
  # ğŸ›‘_BanAD:
  #   type: http
  #   behavior: domain
  #   url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list
  #   path: ./ruleset/banad.list
  #   interval: 86400

  ğŸ“¢_FCM:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GoogleFCM/GoogleFCM.list
    path: ./ruleset/fcm.list
    ;interval: 86400

  ğŸ¯_GoogleCN:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/GoogleCN.list
    path: ./ruleset/google-cn.list
    ;interval: 86400

  ğŸ¯_SteamCN:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/SteamCN.list
    path: ./ruleset/steam-cn.list
    ;interval: 86400

  ğŸ‘¨ğŸ¿â€ğŸ’»_GitHub:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GitHub/GitHub.list
    path: ./ruleset/github.list
    ;interval: 86400

  ğŸ‘¨ğŸ¿â€ğŸ’»_GitHub_classic:       # clash-classic æ ¼å¼ï¼Œä»æŒ‰ domain å¤„ç†
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GitHub/GitHub.yaml
    path: ./ruleset/github-classic.list
    ;interval: 86400

  ğŸ€_Google:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.list
    path: ./ruleset/google.list
    ;interval: 86400

  ğŸ’§_Copilot:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Bing.list
    path: ./ruleset/bing.list
    interval: 86400

  ğŸ¬_OneDrive:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OneDrive/OneDrive.list
    path: ./ruleset/onedrive.list
    ;interval: 86400

  ğŸªŸ_Microsoft:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Microsoft.list
    path: ./ruleset/microsoft.list
    interval: 86400

  ğŸ_Apple:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Apple.list
    path: ./ruleset/apple.list
    ;interval: 86400

  ğŸ“²_Telegram:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.list
    path: ./ruleset/telegram.list
    ;interval: 86400

  â™»ï¸_Speedtest:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Speedtest/Speedtest.list
    path: ./ruleset/speedtest.list
    ;interval: 86400

  ğŸ“¹_YouTube:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/YouTube.list
    path: ./ruleset/youtube.list
    ;interval: 86400

  ğŸ®_Epic:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Epic.list
    path: ./ruleset/epic.list
    ;interval: 86400

  ğŸ®_Origin:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Origin.list
    path: ./ruleset/origin.list
    ;interval: 86400

  ğŸ®_Sony:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Sony.list
    path: ./ruleset/sony.list
    interval: 86400

  ğŸ®_Steam:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Steam.list
    path: ./ruleset/steam.list
    ;interval: 86400

  ğŸ®_Nintendo:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Nintendo.list
    path: ./ruleset/nintendo.list
    ;interval: 86400

  ğŸï¸_ChinaMedia:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaMedia/ChinaMedia.list
    path: ./ruleset/china-media.list
    ;interval: 86400

  ğŸŒ_ProxyMedia:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyMedia.list
    path: ./ruleset/proxy-media.list
    ;interval: 86400

  ğŸš€_ProxyGFW:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyGFWlist.list
    path: ./ruleset/proxy-gfw.list
    ;interval: 86400

  ğŸ¯_ChinaDomain:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list
    path: ./ruleset/china-domain.list
    ;interval: 86400

  ğŸ¯_ChinaCompanyIp:
    type: http
    behavior: ipcidr
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaCompanyIp.list
    path: ./ruleset/china-company-ip.list
    ;interval: 86400

  ğŸ¯_Download:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Download.list
    path: ./ruleset/download.list
    ;interval: 86400

  ğŸ¯_ChinaList:
    type: http
    behavior: domain
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/China/China.list
    path: ./ruleset/china.list
    ;interval: 86400

########################################
# ä»£ç†ç»„ï¼ˆå« LightGBM æ™ºèƒ½ç»„ï¼‰
########################################
proxy-groups:
  - name: "ğŸŒ å…¨å±€æ™ºèƒ½"
    type: smart
    uselightgbm: true
    collectdata: true
    interval: 300
    include-all: true
    filter: ".*"

  - name: "ğŸ‡­ğŸ‡° é¦™æ¸¯æ™ºèƒ½"
    type: smart
    uselightgbm: true
    collectdata: true
    interval: 300
    include-all: true
    filter: "(?=.*(æ¸¯|HK|(?i)Hong))^((?!(å°|æ—¥|éŸ©|æ–°|æ·±|ç¾)).)*$"

  - name: "ğŸ‡¯ğŸ‡µ æ—¥æœ¬æ™ºèƒ½"
    type: smart
    uselightgbm: true
    collectdata: true
    interval: 300
    include-all: true
    filter: "(?=.*(æ—¥|JP|(?i)Japan))^((?!(æ¸¯|å°|éŸ©|æ–°|ç¾)).)*$"

  - name: "ğŸ‡ºğŸ‡¸ ç¾å›½æ™ºèƒ½"
    type: smart
    uselightgbm: true
    collectdata: true
    interval: 300
    include-all: true
    filter: "(?=.*(ç¾|US|(?i)States|America))^((?!(æ¸¯|å°|æ—¥|éŸ©|æ–°)).)*$"

  - {name: "ğŸ¸ æ‰‹åŠ¨åˆ‡æ¢", type: select, proxies: ["DIRECT","*"]}

  - name: "ğŸš€ èŠ‚ç‚¹é€‰æ‹©"
    type: select
    proxies:
      - "ğŸŒ å…¨å±€æ™ºèƒ½"
      - "ğŸ‡­ğŸ‡° é¦™æ¸¯æ™ºèƒ½"
      - "ğŸ‡¯ğŸ‡µ æ—¥æœ¬æ™ºèƒ½"
      - "ğŸ‡ºğŸ‡¸ ç¾å›½æ™ºèƒ½"
      - "ğŸ¸ æ‰‹åŠ¨åˆ‡æ¢"
      - "DIRECT"

  # åŠŸèƒ½åˆ†ç»„ï¼ˆç¤ºä¾‹ï¼‰
  - {name: "ğŸ“¹ YouTube", type: select, proxies: ["ğŸŒ å…¨å±€æ™ºèƒ½","ğŸš€ èŠ‚ç‚¹é€‰æ‹©","DIRECT"]}
  - {name: "ğŸ¤– AI",      type: select, proxies: ["ğŸŒ å…¨å±€æ™ºèƒ½","ğŸš€ èŠ‚ç‚¹é€‰æ‹©","DIRECT"]}
  - {name: "ğŸ“¢ FCM",     type: select, proxies: ["ğŸŒ å…¨å±€æ™ºèƒ½","ğŸš€ èŠ‚ç‚¹é€‰æ‹©","DIRECT"]}
  - {name: "ğŸ“² Telegram",type: select, proxies: ["ğŸŒ å…¨å±€æ™ºèƒ½","ğŸš€ èŠ‚ç‚¹é€‰æ‹©","DIRECT"]}
  - {name: "ğŸ€ Google",  type: select, proxies: ["ğŸŒ å…¨å±€æ™ºèƒ½","ğŸš€ èŠ‚ç‚¹é€‰æ‹©","DIRECT"]}
  - {name: "ğŸ‘¨ğŸ¿â€ğŸ’» GitHub",type: select, proxies: ["ğŸŒ å…¨å±€æ™ºèƒ½","ğŸš€ èŠ‚ç‚¹é€‰æ‹©","DIRECT"]}
  - {name: "ğŸªŸ Microsoft",type: select, proxies: ["ğŸŒ å…¨å±€æ™ºèƒ½","ğŸš€ èŠ‚ç‚¹é€‰æ‹©","DIRECT"]}
  - {name: "ğŸŸ æ¼ç½‘ä¹‹é±¼", type: select, proxies: ["DIRECT","ğŸŒ å…¨å±€æ™ºèƒ½"]}

########################################
# åˆ†æµè§„åˆ™
########################################
rules:
  # ç›´è¿
  - RULE-SET,ğŸ¯_å…¨çƒç›´è¿_main,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,ğŸ¯_LAN,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,ğŸ¯_UnBan,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,ğŸ¯_GoogleCN,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,ğŸ¯_SteamCN,ğŸ¯ å…¨çƒç›´è¿
  - GEOIP,CN,ğŸ¯ å…¨çƒç›´è¿
  - GEOSITE,CN,ğŸ¯ å…¨çƒç›´è¿

  # ä»£ç†
  - RULE-SET,ğŸš€_èŠ‚ç‚¹é€‰æ‹©_proxy-lite,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,ğŸ¤–_AI,ğŸ¤– AI
  - RULE-SET,ğŸ“¢_FCM,ğŸ“¢ FCM
  - RULE-SET,ğŸ‘¨ğŸ¿â€ğŸ’»_GitHub,ğŸ‘¨ğŸ¿â€ğŸ’» GitHub
  - RULE-SET,ğŸ€_Google,ğŸ€ Google
  - RULE-SET,ğŸ’§_Copilot,ğŸ¤– AI
  - RULE-SET,ğŸ¬_OneDrive,ğŸªŸ Microsoft
  - RULE-SET,ğŸªŸ_Microsoft,ğŸªŸ Microsoft
  - RULE-SET,ğŸ_Apple,ğŸ Apple
  - RULE-SET,ğŸ“²_Telegram,ğŸ“² Telegram
  - RULE-SET,â™»ï¸_Speedtest,â™»ï¸ Speedtest
  - RULE-SET,ğŸ“¹_YouTube,ğŸ“¹ YouTube
  - RULE-SET,ğŸ®_Epic,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,ğŸ®_Origin,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,ğŸ®_Sony,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,ğŸ®_Steam,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,ğŸ®_Nintendo,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,ğŸï¸_ChinaMedia,ğŸï¸ å›½å†…åª’ä½“
  - RULE-SET,ğŸŒ_ProxyMedia,ğŸŒ å›½å¤–åª’ä½“
  - RULE-SET,ğŸš€_ProxyGFW,ğŸš€ èŠ‚ç‚¹é€‰æ‹©

  # å…¶ä»–ç›´è¿
  - RULE-SET,ğŸ¯_Download,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,ğŸ¯_ChinaDomain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,ğŸ¯_ChinaCompanyIp,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,ğŸ¯_ChinaList,ğŸ¯ å…¨çƒç›´è¿
  - AND,((NETWORK,UDP),(DST-PORT,443)),DIRECT

  # æ¼ç½‘
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
